!function (e, t, i, n) { "use strict"; var o = i("html"), a = i(e), r = i(t), l = i.fancybox = function () { l.open.apply(this, arguments) }, s = navigator.userAgent.match(/msie/i), c = null, d = void 0 !== t.createTouch, p = function (e) { return e && e.hasOwnProperty && e instanceof i }, h = function (e) { return e && "string" === i.type(e) }, f = function (e) { return h(e) && e.indexOf("%") > 0 }, u = function (e, t) { var i = parseInt(e, 10) || 0; return t && f(e) && (i = l.getViewport()[t] / 100 * i), Math.ceil(i) }, g = function (e, t) { return u(e, t) + "px" }; i.extend(l, { version: "2.1.5", defaults: { padding: 15, margin: 20, width: 800, height: 600, minWidth: 100, minHeight: 100, maxWidth: 9999, maxHeight: 9999, pixelRatio: 1, autoSize: !0, autoHeight: !1, autoWidth: !1, autoResize: !0, autoCenter: !d, fitToView: !0, aspectRatio: !1, topRatio: .5, leftRatio: .5, scrolling: "auto", wrapCSS: "", arrows: !0, closeBtn: !0, closeClick: !1, nextClick: !1, mouseWheel: !0, autoPlay: !1, playSpeed: 3e3, preload: 3, modal: !1, loop: !0, ajax: { dataType: "html", headers: { "X-fancyBox": !0 } }, iframe: { scrolling: "auto", preload: !0 }, swf: { wmode: "transparent", allowfullscreen: "true", allowscriptaccess: "always" }, keys: { next: { 13: "left", 34: "up", 39: "left", 40: "up" }, prev: { 8: "right", 33: "down", 37: "right", 38: "down" }, close: [27], play: [32], toggle: [70] }, direction: { next: "left", prev: "right" }, scrollOutside: !0, index: 0, type: null, href: null, content: null, title: null, tpl: { wrap: '<div class="fancybox-wrap" tabIndex="-1"><div class="fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div></div>', image: '<img class="fancybox-image" src="{href}" alt="" />', iframe: '<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen' + (s ? ' allowtransparency="true"' : "") + "></iframe>", error: '<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.</p>', closeBtn: '<a title="Close" class="fancybox-item fancybox-close" href="javascript:;"></a>', next: '<a title="Next" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>', prev: '<a title="Previous" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>' }, openEffect: "fade", openSpeed: 250, openEasing: "swing", openOpacity: !0, openMethod: "zoomIn", closeEffect: "fade", closeSpeed: 250, closeEasing: "swing", closeOpacity: !0, closeMethod: "zoomOut", nextEffect: "elastic", nextSpeed: 250, nextEasing: "swing", nextMethod: "changeIn", prevEffect: "elastic", prevSpeed: 250, prevEasing: "swing", prevMethod: "changeOut", helpers: { overlay: !0, title: !0 }, onCancel: i.noop, beforeLoad: i.noop, afterLoad: i.noop, beforeShow: i.noop, afterShow: i.noop, beforeChange: i.noop, beforeClose: i.noop, afterClose: i.noop }, group: {}, opts: {}, previous: null, coming: null, current: null, isActive: !1, isOpen: !1, isOpened: !1, wrap: null, skin: null, outer: null, inner: null, player: { timer: null, isActive: !1 }, ajaxLoad: null, imgPreload: null, transitions: {}, helpers: {}, open: function (e, t) { if (e && (i.isPlainObject(t) || (t = {}), !1 !== l.close(!0))) return i.isArray(e) || (e = p(e) ? i(e).get() : [e]), i.each(e, function (n, o) { var a, r, s, c, d, f, u, g = {}; "object" === i.type(o) && (o.nodeType && (o = i(o)), p(o) ? (g = { href: o.data("fancybox-href") || o.attr("href"), title: o.data("fancybox-title") || o.attr("title"), isDom: !0, element: o }, i.metadata && i.extend(!0, g, o.metadata())) : g = o), a = t.href || g.href || (h(o) ? o : null), r = void 0 !== t.title ? t.title : g.title || "", !(c = (s = t.content || g.content) ? "html" : t.type || g.type) && g.isDom && ((c = o.data("fancybox-type")) || (c = (d = o.prop("class").match(/fancybox\.(\w+)/)) ? d[1] : null)), h(a) && (c || (l.isImage(a) ? c = "image" : l.isSWF(a) ? c = "swf" : "#" === a.charAt(0) ? c = "inline" : h(o) && (c = "html", s = o)), "ajax" === c && (f = a.split(/\s+/, 2), a = f.shift(), u = f.shift())), s || ("inline" === c ? a ? s = i(h(a) ? a.replace(/.*(?=#[^\s]+$)/, "") : a) : g.isDom && (s = o) : "html" === c ? s = a : c || a || !g.isDom || (c = "inline", s = o)), i.extend(g, { href: a, type: c, content: s, title: r, selector: u }), e[n] = g }), l.opts = i.extend(!0, {}, l.defaults, t), void 0 !== t.keys && (l.opts.keys = !!t.keys && i.extend({}, l.defaults.keys, t.keys)), l.group = e, l._start(l.opts.index) }, cancel: function () { var e = l.coming; e && !1 !== l.trigger("onCancel") && (l.hideLoading(), l.ajaxLoad && l.ajaxLoad.abort(), l.ajaxLoad = null, l.imgPreload && (l.imgPreload.onload = l.imgPreload.onerror = null), e.wrap && e.wrap.stop(!0, !0).trigger("onReset").remove(), l.coming = null, l.current || l._afterZoomOut(e)) }, close: function (e) { l.cancel(), !1 !== l.trigger("beforeClose") && (l.unbindEvents(), l.isActive && (l.isOpen && !0 !== e ? (l.isOpen = l.isOpened = !1, l.isClosing = !0, i(".fancybox-item, .fancybox-nav").remove(), l.wrap.stop(!0, !0).removeClass("fancybox-opened"), l.transitions[l.current.closeMethod]()) : (i(".fancybox-wrap").stop(!0).trigger("onReset").remove(), l._afterZoomOut()))) }, play: function (e) { var t = function () { clearTimeout(l.player.timer) }, i = function () { t(), l.current && l.player.isActive && (l.player.timer = setTimeout(l.next, l.current.playSpeed)) }, n = function () { t(), r.unbind(".player"), l.player.isActive = !1, l.trigger("onPlayEnd") }; !0 === e || !l.player.isActive && !1 !== e ? l.current && (l.current.loop || l.current.index < l.group.length - 1) && (l.player.isActive = !0, r.bind({ "onCancel.player beforeClose.player": n, "onUpdate.player": i, "beforeLoad.player": t }), i(), l.trigger("onPlayStart")) : n() }, next: function (e) { var t = l.current; t && (h(e) || (e = t.direction.next), l.jumpto(t.index + 1, e, "next")) }, prev: function (e) { var t = l.current; t && (h(e) || (e = t.direction.prev), l.jumpto(t.index - 1, e, "prev")) }, jumpto: function (e, t, i) { var n = l.current; n && (e = u(e), l.direction = t || n.direction[e >= n.index ? "next" : "prev"], l.router = i || "jumpto", n.loop && (e < 0 && (e = n.group.length + e % n.group.length), e %= n.group.length), void 0 !== n.group[e] && (l.cancel(), l._start(e))) }, reposition: function (e, t) { var n, o = l.current, a = o ? o.wrap : null; a && (n = l._getPosition(t), e && "scroll" === e.type ? (delete n.position, a.stop(!0, !0).animate(n, 200)) : (a.css(n), o.pos = i.extend({}, o.dim, n))) }, update: function (e) { var t = e && e.type, i = !t || "orientationchange" === t; i && (clearTimeout(c), c = null), l.isOpen && !c && (c = setTimeout(function () { var n = l.current; n && !l.isClosing && (l.wrap.removeClass("fancybox-tmp"), (i || "load" === t || "resize" === t && n.autoResize) && l._setDimension(), "scroll" === t && n.canShrink || l.reposition(e), l.trigger("onUpdate"), c = null) }, i && !d ? 0 : 300)) }, toggle: function (e) { l.isOpen && (l.current.fitToView = "boolean" === i.type(e) ? e : !l.current.fitToView, d && (l.wrap.removeAttr("style").addClass("fancybox-tmp"), l.trigger("onUpdate")), l.update()) }, hideLoading: function () { r.unbind(".loading"), i("#fancybox-loading").remove() }, showLoading: function () { var e, t; l.hideLoading(), e = i('<div id="fancybox-loading"><div></div></div>').click(l.cancel).appendTo("body"), r.bind("keydown.loading", function (e) { 27 === (e.which || e.keyCode) && (e.preventDefault(), l.cancel()) }), l.defaults.fixed || (t = l.getViewport(), e.css({ position: "absolute", top: .5 * t.h + t.y, left: .5 * t.w + t.x })) }, getViewport: function () { var t = l.current && l.current.locked || !1, i = { x: a.scrollLeft(), y: a.scrollTop() }; return t ? (i.w = t[0].clientWidth, i.h = t[0].clientHeight) : (i.w = d && e.innerWidth ? e.innerWidth : a.width(), i.h = d && e.innerHeight ? e.innerHeight : a.height()), i }, unbindEvents: function () { l.wrap && p(l.wrap) && l.wrap.unbind(".fb"), r.unbind(".fb"), a.unbind(".fb") }, bindEvents: function () { var e, t = l.current; t && (a.bind("orientationchange.fb" + (d ? "" : " resize.fb") + (t.autoCenter && !t.locked ? " scroll.fb" : ""), l.update), (e = t.keys) && r.bind("keydown.fb", function (n) { var o = n.which || n.keyCode, a = n.target || n.srcElement; if (27 === o && l.coming) return !1; n.ctrlKey || n.altKey || n.shiftKey || n.metaKey || a && (a.type || i(a).is("[contenteditable]")) || i.each(e, function (e, a) { return t.group.length > 1 && void 0 !== a[o] ? (l[e](a[o]), n.preventDefault(), !1) : i.inArray(o, a) > -1 ? (l[e](), n.preventDefault(), !1) : void 0 }) }), i.fn.mousewheel && t.mouseWheel && l.wrap.bind("mousewheel.fb", function (e, n, o, a) { for (var r, s = e.target || null, c = i(s), d = !1; c.length && !(d || c.is(".fancybox-skin") || c.is(".fancybox-wrap"));)d = (r = c[0]) && !(r.style.overflow && "hidden" === r.style.overflow) && (r.clientWidth && r.scrollWidth > r.clientWidth || r.clientHeight && r.scrollHeight > r.clientHeight), c = i(c).parent(); 0 === n || d || l.group.length > 1 && !t.canShrink && (a > 0 || o > 0 ? l.prev(a > 0 ? "down" : "left") : (a < 0 || o < 0) && l.next(a < 0 ? "up" : "right"), e.preventDefault()) })) }, trigger: function (e, t) { var n, o = t || l.coming || l.current; if (o) { if (i.isFunction(o[e]) && (n = o[e].apply(o, Array.prototype.slice.call(arguments, 1))), !1 === n) return !1; o.helpers && i.each(o.helpers, function (t, n) { n && l.helpers[t] && i.isFunction(l.helpers[t][e]) && l.helpers[t][e](i.extend(!0, {}, l.helpers[t].defaults, n), o) }), r.trigger(e) } }, isImage: function (e) { return h(e) && e.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg)((\?|#).*)?$)/i) }, isSWF: function (e) { return h(e) && e.match(/\.(swf)((\?|#).*)?$/i) }, _start: function (e) { var t, n, o, a, r, s = {}; if (e = u(e), !(t = l.group[e] || null)) return !1; if (a = (s = i.extend(!0, {}, l.opts, t)).margin, r = s.padding, "number" === i.type(a) && (s.margin = [a, a, a, a]), "number" === i.type(r) && (s.padding = [r, r, r, r]), s.modal && i.extend(!0, s, { closeBtn: !1, closeClick: !1, nextClick: !1, arrows: !1, mouseWheel: !1, keys: null, helpers: { overlay: { closeClick: !1 } } }), s.autoSize && (s.autoWidth = s.autoHeight = !0), "auto" === s.width && (s.autoWidth = !0), "auto" === s.height && (s.autoHeight = !0), s.group = l.group, s.index = e, l.coming = s, !1 !== l.trigger("beforeLoad")) { if (o = s.type, n = s.href, !o) return l.coming = null, !(!l.current || !l.router || "jumpto" === l.router) && (l.current.index = e, l[l.router](l.direction)); if (l.isActive = !0, "image" !== o && "swf" !== o || (s.autoHeight = s.autoWidth = !1, s.scrolling = "visible"), "image" === o && (s.aspectRatio = !0), "iframe" === o && d && (s.scrolling = "scroll"), "1" == CCMS_LanguageSN && (s.tpl.closeBtn = i("<div />").append(i(s.tpl.closeBtn).attr("title", "關閉")).html(), s.tpl.next = i("<div />").append(i(s.tpl.closeBtn).attr("title", "下一頁")).html(), s.tpl.prev = i("<div />").append(i(s.tpl.closeBtn).attr("title", "上一頁")).html()), s.wrap = i(s.tpl.wrap).addClass("fancybox-" + (d ? "mobile" : "desktop") + " fancybox-type-" + o + " fancybox-tmp " + s.wrapCSS).appendTo(s.parent || "body"), i.extend(s, { skin: i(".fancybox-skin", s.wrap), outer: i(".fancybox-outer", s.wrap), inner: i(".fancybox-inner", s.wrap) }), i.each(["Top", "Right", "Bottom", "Left"], function (e, t) { s.skin.css("padding" + t, g(s.padding[e])) }), l.trigger("onReady"), "inline" === o || "html" === o) { if (!s.content || !s.content.length) return l._error("content") } else if (!n) return l._error("href"); "image" === o ? l._loadImage() : "ajax" === o ? l._loadAjax() : "iframe" === o ? l._loadIframe() : l._afterLoad() } else l.coming = null }, _error: function (e) { i.extend(l.coming, { type: "html", autoWidth: !0, autoHeight: !0, minWidth: 0, minHeight: 0, scrolling: "no", hasError: e, content: l.coming.tpl.error }), l._afterLoad() }, _loadImage: function () { var e = l.imgPreload = new Image; e.onload = function () { this.onload = this.onerror = null, l.coming.width = this.width / l.opts.pixelRatio, l.coming.height = this.height / l.opts.pixelRatio, l._afterLoad() }, e.onerror = function () { this.onload = this.onerror = null, l._error("image") }, e.src = l.coming.href, !0 !== e.complete && l.showLoading() }, _loadAjax: function () { var e = l.coming; l.showLoading(), l.ajaxLoad = i.ajax(i.extend({}, e.ajax, { url: e.href, error: function (e, t) { l.coming && "abort" !== t ? l._error("ajax", e) : l.hideLoading() }, success: function (t, i) { "success" === i && (e.content = t, l._afterLoad()) } })) }, _loadIframe: function () { var e = l.coming, t = i(e.tpl.iframe.replace(/\{rnd\}/g, (new Date).getTime())).attr("scrolling", d ? "auto" : e.iframe.scrolling).attr("src", e.href); i(e.wrap).bind("onReset", function () { try { i(this).find("iframe").hide().attr("src", "//about:blank").end().empty() } catch (e) { } }), e.iframe.preload && (l.showLoading(), t.one("load", function () { i(this).data("ready", 1), d || i(this).bind("load.fb", l.update), i(this).parents(".fancybox-wrap").width("100%").removeClass("fancybox-tmp").show(), l._afterLoad() })), e.content = t.appendTo(e.inner), e.iframe.preload || l._afterLoad() }, _preloadImages: function () { var e, t, i = l.group, n = l.current, o = i.length, a = n.preload ? Math.min(n.preload, o - 1) : 0; for (t = 1; t <= a; t += 1)"image" === (e = i[(n.index + t) % o]).type && e.href && ((new Image).src = e.href) }, _afterLoad: function () { var e, t, n, o, a, r, s = l.coming, c = l.current, d = "fancybox-placeholder"; if (l.hideLoading(), s && !1 !== l.isActive) { if (!1 === l.trigger("afterLoad", s, c)) return s.wrap.stop(!0).trigger("onReset").remove(), void (l.coming = null); switch (c && (l.trigger("beforeChange", c), c.wrap.stop(!0).removeClass("fancybox-opened").find(".fancybox-item, .fancybox-nav").remove()), l.unbindEvents(), e = s, t = s.content, n = s.type, o = s.scrolling, i.extend(l, { wrap: e.wrap, skin: e.skin, outer: e.outer, inner: e.inner, current: e, previous: c }), a = e.href, n) { case "inline": case "ajax": case "html": e.selector ? t = i("<div>").html(t).find(e.selector) : p(t) && (t.data(d) || t.data(d, i('<div class="' + d + '"></div>').insertAfter(t).hide()), t = t.show().detach(), e.wrap.bind("onReset", function () { i(this).find(t).length && t.hide().replaceAll(t.data(d)).data(d, !1) })); break; case "image": t = e.tpl.image.replace("{href}", a); break; case "swf": t = '<object id="fancybox-swf" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="movie" value="' + a + '"></param>', r = "", i.each(e.swf, function (e, i) { t += '<param name="' + e + '" value="' + i + '"></param>', r += " " + e + '="' + i + '"' }), t += '<embed src="' + a + '" type="application/x-shockwave-flash" width="100%" height="100%"' + r + "></embed></object>" }p(t) && t.parent().is(e.inner) || e.inner.append(t), l.trigger("beforeShow"), e.inner.css("overflow", "yes" === o ? "scroll" : "no" === o ? "hidden" : o), l._setDimension(), l.reposition(), l.isOpen = !1, l.coming = null, l.bindEvents(), l.isOpened ? c.prevMethod && l.transitions[c.prevMethod]() : i(".fancybox-wrap").not(e.wrap).stop(!0).trigger("onReset").remove(), l.transitions[l.isOpened ? e.nextMethod : e.openMethod](), l._preloadImages() } }, _setDimension: function () { var e, t, n, o, a, r, s, c, d, p, h, m, y, x, v, w, b, k = l.getViewport(), C = 0, O = l.wrap, S = l.skin, W = l.inner, _ = l.current, T = _.width, L = _.height, E = _.minWidth, R = _.minHeight, j = _.maxWidth, M = _.maxHeight, P = _.scrolling, H = _.scrollOutside ? _.scrollbarWidth : 0, A = _.margin, I = u(A[1] + A[3]), D = u(A[0] + A[2]); if (O.add(S).add(W).width("auto").height("auto").removeClass("fancybox-tmp"), a = I + (n = u(S.outerWidth(!0) - S.width())), r = D + (o = u(S.outerHeight(!0) - S.height())), s = f(T) ? (k.w - a) * u(T) / 100 : T, c = f(L) ? (k.h - r) * u(L) / 100 : L, "iframe" === _.type) { if (w = _.content, _.autoHeight && 1 === w.data("ready")) try { w[0].contentWindow.document.location && (W.width(s).height(9999), b = w.contents().find("body"), H && b.css("overflow-x", "hidden"), c = b.outerHeight(!0)) } catch (e) { } } else (_.autoWidth || _.autoHeight) && (W.addClass("fancybox-tmp"), _.autoWidth || W.width(s), _.autoHeight || W.height(c), _.autoWidth && (s = W.width()), _.autoHeight && (c = W.height()), W.removeClass("fancybox-tmp")); if (T = u(s), L = u(c), h = s / c, E = u(f(E) ? u(E, "w") - a : E), j = u(f(j) ? u(j, "w") - a : j), R = u(f(R) ? u(R, "h") - r : R), d = j, p = M = u(f(M) ? u(M, "h") - r : M), _.fitToView && (j = Math.min(k.w - a, j), M = Math.min(k.h - r, M)), x = k.w - I, v = k.h - D, _.aspectRatio ? (T > j && (L = u((T = j) / h)), L > M && (T = u((L = M) * h)), T < E && (L = u((T = E) / h)), L < R && (T = u((L = R) * h))) : (T = Math.max(E, Math.min(T, j)), _.autoHeight && "iframe" !== _.type && (W.width(T), L = W.height()), L = Math.max(R, Math.min(L, M))), _.fitToView) if (W.width(T).height(L), O.width(T + n), m = O.width(), y = O.height(), _.aspectRatio) for (; (m > x || y > v) && T > E && L > R && !(C++ > 19);)L = Math.max(R, Math.min(M, L - 10)), (T = u(L * h)) < E && (L = u((T = E) / h)), T > j && (L = u((T = j) / h)), W.width(T).height(L), O.width(T + n), m = O.width(), y = O.height(); else T = Math.max(E, Math.min(T, T - (m - x))), L = Math.max(R, Math.min(L, L - (y - v))); H && "auto" === P && L < c && T + n + H < x && (T += H), W.width(T).height(L), O.width(T + n), m = O.width(), y = O.height(), e = (m > x || y > v) && T > E && L > R, t = _.aspectRatio ? T < d && L < p && T < s && L < c : (T < d || L < p) && (T < s || L < c), i.extend(_, { dim: { width: g(m), height: g(y) }, origWidth: s, origHeight: c, canShrink: e, canExpand: t, wPadding: n, hPadding: o, wrapSpace: y - S.outerHeight(!0), skinSpace: S.height() - L }), !w && _.autoHeight && L > R && L < M && !t && W.height("auto") }, _getPosition: function (e) { var t = l.current, i = l.getViewport(), n = t.margin, o = l.wrap.width() + n[1] + n[3], a = l.wrap.height() + n[0] + n[2], r = { position: "absolute", top: n[0], left: n[3] }; return t.autoCenter && t.fixed && !e && a <= i.h && o <= i.w ? r.position = "fixed" : t.locked || (r.top += i.y, r.left += i.x), r.top = g(Math.max(r.top, r.top + (i.h - a) * t.topRatio)), r.left = g(Math.max(r.left, r.left + (i.w - o) * t.leftRatio)), r }, _afterZoomIn: function () { var e = l.current; e && (l.isOpen = l.isOpened = !0, l.wrap.css("overflow", "visible").addClass("fancybox-opened"), l.update(), (e.closeClick || e.nextClick && l.group.length > 1) && l.inner.css("cursor", "pointer").bind("click.fb", function (t) { i(t.target).is("a") || i(t.target).parent().is("a") || (t.preventDefault(), l[e.closeClick ? "close" : "next"]()) }), e.closeBtn && i(e.tpl.closeBtn).appendTo(l.skin).bind("click.fb", function (e) { e.preventDefault(), l.close() }), e.arrows && l.group.length > 1 && ((e.loop || e.index > 0) && i(e.tpl.prev).appendTo(l.outer).bind("click.fb", l.prev), (e.loop || e.index < l.group.length - 1) && i(e.tpl.next).appendTo(l.outer).bind("click.fb", l.next)), l.trigger("afterShow"), e.loop || e.index !== e.group.length - 1 ? l.opts.autoPlay && !l.player.isActive && (l.opts.autoPlay = !1, l.play()) : l.play(!1)) }, _afterZoomOut: function (e) { e = e || l.current, i(".fancybox-wrap").trigger("onReset").remove(), i.extend(l, { group: {}, opts: {}, router: !1, current: null, isActive: !1, isOpened: !1, isOpen: !1, isClosing: !1, wrap: null, skin: null, outer: null, inner: null }), l.trigger("afterClose", e) } }), l.transitions = { getOrigPosition: function () { var e = l.current, t = e.element, i = e.orig, n = {}, o = 50, a = 50, r = e.hPadding, s = e.wPadding, c = l.getViewport(); return !i && e.isDom && t.is(":visible") && ((i = t.find("img:first")).length || (i = t)), p(i) ? (n = i.offset(), i.is("img") && (o = i.outerWidth(), a = i.outerHeight())) : (n.top = c.y + (c.h - a) * e.topRatio, n.left = c.x + (c.w - o) * e.leftRatio), ("fixed" === l.wrap.css("position") || e.locked) && (n.top -= c.y, n.left -= c.x), n = { top: g(n.top - r * e.topRatio), left: g(n.left - s * e.leftRatio), width: g(o + s), height: g(a + r) } }, step: function (e, t) { var i, n, o = t.prop, a = l.current, r = a.wrapSpace, s = a.skinSpace; "width" !== o && "height" !== o || (i = t.end === t.start ? 1 : (e - t.start) / (t.end - t.start), l.isClosing && (i = 1 - i), n = e - ("width" === o ? a.wPadding : a.hPadding), l.skin[o](u("width" === o ? n : n - r * i)), l.inner[o](u("width" === o ? n : n - r * i - s * i))) }, zoomIn: function () { var e = l.current, t = e.pos, n = e.openEffect, o = "elastic" === n, a = i.extend({ opacity: 1 }, t); delete a.position, o ? (t = this.getOrigPosition(), e.openOpacity && (t.opacity = .1)) : "fade" === n && (t.opacity = .1), l.wrap.css(t).animate(a, { duration: "none" === n ? 0 : e.openSpeed, easing: e.openEasing, step: o ? this.step : null, complete: l._afterZoomIn }) }, zoomOut: function () { var e = l.current, t = e.closeEffect, i = "elastic" === t, n = { opacity: .1 }; i && (n = this.getOrigPosition(), e.closeOpacity && (n.opacity = .1)), l.wrap.animate(n, { duration: "none" === t ? 0 : e.closeSpeed, easing: e.closeEasing, step: i ? this.step : null, complete: l._afterZoomOut }) }, changeIn: function () { var e, t = l.current, i = t.nextEffect, n = t.pos, o = { opacity: 1 }, a = l.direction; n.opacity = .1, "elastic" === i && (e = "down" === a || "up" === a ? "top" : "left", "down" === a || "right" === a ? (n[e] = g(u(n[e]) - 200), o[e] = "+=200px") : (n[e] = g(u(n[e]) + 200), o[e] = "-=200px")), "none" === i ? l._afterZoomIn() : l.wrap.css(n).animate(o, { duration: t.nextSpeed, easing: t.nextEasing, complete: l._afterZoomIn }) }, changeOut: function () { var e = l.previous, t = e.prevEffect, n = { opacity: .1 }, o = l.direction; "elastic" === t && (n["down" === o || "up" === o ? "top" : "left"] = ("up" === o || "left" === o ? "-" : "+") + "=200px"), e.wrap.animate(n, { duration: "none" === t ? 0 : e.prevSpeed, easing: e.prevEasing, complete: function () { i(this).trigger("onReset").remove() } }) } }, l.helpers.overlay = { defaults: { closeClick: !0, speedOut: 200, showEarly: !0, css: {}, locked: !d, fixed: !0 }, overlay: null, fixed: !1, el: i("html"), create: function (e) { e = i.extend({}, this.defaults, e), this.overlay && this.close(), this.overlay = i('<div class="fancybox-overlay"></div>').appendTo(l.coming ? l.coming.parent : e.parent), this.fixed = !1, e.fixed && l.defaults.fixed && (this.overlay.addClass("fancybox-overlay-fixed"), this.fixed = !0) }, open: function (e) { var t = this; e = i.extend({}, this.defaults, e), this.overlay ? this.overlay.unbind(".overlay").width("auto").height("auto") : this.create(e), this.fixed || (a.bind("resize.overlay", i.proxy(this.update, this)), this.update()), e.closeClick && this.overlay.bind("click.overlay", function (e) { if (i(e.target).hasClass("fancybox-overlay")) return l.isActive ? l.close() : t.close(), !1 }), this.overlay.css(e.css).show() }, close: function () { var e, t; a.unbind("resize.overlay"), this.el.hasClass("fancybox-lock") && (i(".fancybox-margin").removeClass("fancybox-margin"), e = a.scrollTop(), t = a.scrollLeft(), this.el.removeClass("fancybox-lock"), a.scrollTop(e).scrollLeft(t)), i(".fancybox-overlay").remove().hide(), i.extend(this, { overlay: null, fixed: !1 }) }, update: function () { var e, i = "100%"; this.overlay.width(i).height("100%"), s ? (e = Math.max(t.documentElement.offsetWidth, t.body.offsetWidth), r.width() > e && (i = r.width())) : r.width() > a.width() && (i = r.width()), this.overlay.width(i).height(r.height()) }, onReady: function (e, t) { var n = this.overlay; i(".fancybox-overlay").stop(!0, !0), n || this.create(e), e.locked && this.fixed && t.fixed && (n || (this.margin = r.height() > a.height() && i("html").css("margin-right").replace("px", "")), t.locked = this.overlay.append(t.wrap), t.fixed = !1), !0 === e.showEarly && this.beforeShow.apply(this, arguments) }, beforeShow: function (e, t) { var n, o; t.locked && (!1 !== this.margin && (i("*").filter(function () { return "fixed" === i(this).css("position") && !i(this).hasClass("fancybox-overlay") && !i(this).hasClass("fancybox-wrap") }).addClass("fancybox-margin"), this.el.addClass("fancybox-margin")), n = a.scrollTop(), o = a.scrollLeft(), this.el.addClass("fancybox-lock"), a.scrollTop(n).scrollLeft(o)), this.open(e) }, onUpdate: function () { this.fixed || this.update() }, afterClose: function (e) { this.overlay && !l.coming && this.overlay.fadeOut(e.speedOut, i.proxy(this.close, this)) } }, l.helpers.title = { defaults: { type: "float", position: "bottom" }, beforeShow: function (e) { var t, n, o = l.current, a = o.title, r = e.type; if (i.isFunction(a) && (a = a.call(o.element, o)), h(a) && "" !== i.trim(a)) { switch (t = i('<div class="fancybox-title fancybox-title-' + r + '-wrap">' + a + "</div>"), r) { case "inside": n = l.skin; break; case "outside": n = l.wrap; break; case "over": n = l.inner; break; default: n = l.skin, t.appendTo("body"), s && t.width(t.width()), t.wrapInner('<span class="child"></span>'), l.current.margin[2] += Math.abs(u(t.css("margin-bottom"))) }t["top" === e.position ? "prependTo" : "appendTo"](n) } } }, i.fn.fancybox = function (e) { var t, n = i(this), o = this.selector || "", a = function (a) { var r, s, c = i(this).blur(), d = t; a.ctrlKey || a.altKey || a.shiftKey || a.metaKey || c.is(".fancybox-wrap") || (r = e.groupAttr || "data-fancybox-group", (s = c.attr(r)) || (r = "rel", s = c.get(0)[r]), s && "" !== s && "nofollow" !== s && (d = (c = (c = o.length ? i(o) : n).filter("[" + r + '="' + s + '"]')).index(this)), e.index = d, !1 !== l.open(c, e) && a.preventDefault()) }; return t = (e = e || {}).index || 0, o && !1 !== e.live ? r.undelegate(o, "click.fb-start").delegate(o + ":not('.fancybox-item, .fancybox-nav')", "click.fb-start", a) : n.unbind("click.fb-start").bind("click.fb-start", a), this.filter("[data-fancybox-start=1]").trigger("click"), this }, r.ready(function () { var t, n, a, r; void 0 === i.scrollbarWidth && (i.scrollbarWidth = function () { var e = i('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body"), t = e.children(), n = t.innerWidth() - t.height(99).innerWidth(); return e.remove(), n }), void 0 === i.support.fixedPosition && (i.support.fixedPosition = (a = i('<div style="position:fixed;top:20px;"></div>').appendTo("body"), r = 20 === a[0].offsetTop || 15 === a[0].offsetTop, a.remove(), r)), i.extend(l.defaults, { scrollbarWidth: i.scrollbarWidth(), fixed: i.support.fixedPosition, parent: i("body") }), t = i(e).width(), o.addClass("fancybox-lock-test"), n = i(e).width(), o.removeClass("fancybox-lock-test"), i("<style type='text/css'>.fancybox-margin{margin-right:" + (n - t) + "px;}</style>").appendTo("head") }) }(window, document, jQuery);