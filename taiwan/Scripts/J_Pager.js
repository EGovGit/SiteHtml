function JPager(a) { if (this.JPager = $(a.Pager), this.GridView = $(a.GridView), this.DataWarehouse = $(a.DataWarehouse), this.DataWarehouseDatas = function () { return this.DataWarehouse.find("tr") }, this.DataWarehouseDatasGridShow = function () { return this.DataWarehouse.find("tr").filter(function (a) { return 1 == $(this).data("gridshow") }) }, this.GridViewDatas = function () { return this.GridView.find("tbody tr") }, this.DataCount = function () { return this.DataWarehouseDatasGridShow().length }, this.PageSize = a.PageSize, this._PagerUIMaxSize = 10, this._PagerUILeftMaxSize = 4, this.PagerUL = this.JPager.find("ul"), this.PageIndex = 1, this.PageMaxIndex = function () { return this.PagerUL.find("li").length }, this.SearchBox = $(a.SearchBox), this.SearchBox) { var t = $('<input id=txtSearch type="search"  value="" >'); this.SearchBox.append(t), this.SearchBoxKeyword = function () { return this.SearchBox.find("input").val() }, t.keyup($.proxy(function () { this.Search(this.SearchBoxKeyword()) }, this)) } this.BindPager = $.proxy(function () { for (this.PagerUL.find("li").remove(), i = 1; i <= Math.ceil(this.DataCount() / this.PageSize); i++) { var a = $('<li page="' + i + '"><a href="javascript:void(0);">' + i + "</a></li>"), t = this; a.click(function () { t.ChangePageIndex($(this).attr("page")) }), this.PagerUL.append(a) } }, this), this.ChangePageIndex = $.proxy(function (a) { this.PageIndex = parseInt(a), this.PagerUL.find("li").removeClass("is-active"), this.PagerUL.find('li[page="' + a + '"]').addClass("is-active"), this.RecoverDataWarehouse(); var i = this.DataWarehouseDatasGridShow().slice((a - 1) * this.PageSize, a * this.PageSize); this.GridView.find("tbody").empty(), this.GridView.append(i); var t = this.PageIndex - this._PagerUILeftMaxSize; t <= 0 && (t = 1); var e = t + this._PagerUIMaxSize - 1; this.PageMaxIndex() <= e && (t -= e - this.PageMaxIndex(), e -= e - this.PageMaxIndex()); for (var h = [], s = t; s <= e; s++)h.push(s); this.PagerUL.find("li").hide(), $.each(this.PagerUL.find("li"), function (a, i) { var t = a + 1; $.inArray(t, h) > -1 && $(i).show() }) }, this), this.Search = $.proxy(function (a) { this.RecoverDataWarehouse(), "" == a ? this.DataWarehouseDatas().data("gridshow", !0) : (this.DataWarehouseDatas().data("gridshow", !1), this.DataWarehouseDatas().each(function () { var i = !1; $(this).find("td").each(function () { $(this).html().toLowerCase().indexOf(a.toLowerCase()) > -1 && (i = !0) }), i && $(this).data("gridshow", !0) })), this.BindPager(), this.ChangePageIndex(1) }, this), this.RecoverDataWarehouse = $.proxy(function (a) { this.DataWarehouse.append(this.GridViewDatas()), this.DataWarehouseDatas().sort(function (a, i) { return $(i).data("position") < $(a).data("position") ? 1 : -1 }).appendTo(this.DataWarehouse) }, this), this.Search("") } function StopBubble(a) { a && a.stopPropagation ? a.stopPropagation() : window.event.cancelBubble = !0 }